# 이상 현상

불필요한 데이터 중복으로 인해 릴레이션에 대한 데이터 삽입, 수정, 삭제 연산을 할 때 발생할 수 있는 부작용이다.

### 원인 

주로 데이터베이스 설계가 적절하지 않을 때 발생하며, 특히 테이블 구조가 비효율적일 때 자주 나타난다.



### 해결 방안

📌 **정규화(Normalization)**

정규화는 데이터베이스를 잘 구조화하여 삽입, 삭제, 갱신 이상의 문제를 최소화한다. 정규화는 데이터를 여러 테이블로 분할	하고 각 테이블 간의 관계를 정의하여 중복을 줄이고 데이터 무결성을 유지하는 방법이다.





## 이상 현상의 종류

1. **삽입 이상 (Insertion Anomaly)**

   데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제 (강제 삽입)

2. **갱신 이상 (Update Anomaly)**

​	중복 튜플 중 일부만 변경하여 데이터가 불일치하게 되는 문제 (일부 애트리뷰만 갱신)

3. **삭제 이상 (Deletion Anomaly)**

​	튜플을 삭제하면 꼭 필요한 데이터까지 같이 삭제되는 데이터 손실 문제 (연쇄 삭제)





## 이상 현상의 예시

수강 테이블이 다음과 같다고 가정하자.

| <u>아이디</u> | <u>수강과목</u> | 과목구분 | 강의코드 | 학생명 |
| :-----------: | :-------------: | :------: | :------: | :----: |
|      S1       |  데이터베이스   |   전공   |   AC1    | 김철수 |
|      S1       |    정보보호     |   전공   |   AC2    | 김철수 |
|      S1       |     한국사      |   교양   |   CC1    | 김철수 |
|      S2       |   토익 스피킹   |   교양   |   CC2    | 홍길동 |
|      S2       |     한국사      |   교양   |   CC1    | 홍길동 |
|      S3       |  데이터베이스   |   전공   |   AC1    | 김영희 |
|      S4       |     글쓰기      |   교양   |   CC3    | 마이콜 |



**✔️ 삽입 이상이 발생하는 예:**

- 아이디가 `S5`이고 이름이 `이희동`이라는 학생이 `교양` 과목을 들으려고 할 때, `아이디`와 `수강과목`이 기본키(복합키)로 설정되어 있어 삽입을 할 수 없다. 즉, 수강할 과목을 결정하지 않은 학생은 수강 테이블에 삽입할 수 없다.
- 이는 학생과 수업 데이터가 합 테이블에 있기 때문이다



**✔️ 갱신 이상이 발생하는 예:**

- 아이디가 `S1`인 `김철수` 학생의 이름을 `김철호`로 변경하려면, 해당 학생의 모든 레코드를 찾아서 이름을 수정해야 한다.

- 즉, `UPDATE 수강 SET 학생명 = '김철호' WHERE 아이디 = 'S1' AND 수강과목 = '데이터베이스';`을 하게 되면,

  | <u>아이디</u> | <u>수강과목</u> | 과목구분 | 강의코드 | 학생명 |
  | :-----------: | :-------------: | :------: | :------: | :----: |
  |      S1       |  데이터베이스   |   전공   |   AC1    | 김철호 |
  |      S1       |    정보보호     |   전공   |   AC2    | 김철수 |
  |      S1       |     한국사      |   교양   |   CC1    | 김철수 |

   일부 레코드만 수정되기 때문에 동일한 학생에 대한 정보가 불일치하게 된다. 

- 이는 데이터 무결성을 해치게 된다.



**✔️ 삭제 이상이 발생하는 예:**

- 아이디가 `S4`인 `마이콜` 학생이 글쓰기 수업을 듣지 않게 되어 그 레코드를 삭제하면, “글쓰기” 수업이 교양 과목이라는 정보도 함께 삭제될 수 있다.
- 즉, “글쓰기” 수업에 대한 정보가 사라져버릴 수 있다.



**👉 이와 같은 현상은 정규화, 즉 학생 테이블과 수강 테이블을 분리하여 설계하면 삽입, 갱신, 삭제 이상의 문제를 줄일 수 있다.**
