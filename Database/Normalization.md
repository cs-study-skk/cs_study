# ✔️ 정규화

정규화란 하나의 종속성이 하나의 릴레이션으로 표현되도록 분해하는 과정이다. 즉, 하나의 릴레이션에 하나의 의미만 존재하도록 릴레이션을 분해하는 과정이다.

데이터의 중복성을 최소화하여 중복에 따른 변경 이상(Anomaly) 현상을 제거하는 과정인데, 이를 통해 데이터 구조의 안정성을 최대화한다. 떄문에 테이블의 구성을 논리적이고 직관적으로 한다.

결론적으로 정규화는 **데이터의 일관성, 최소한의 데이터 중복, 최대한의 데이터 유연성**을 위한 방법이다.

논리 설계 단계에서 수행하며, 물리적 구조에 영향을 주지는 않는다.



## 정규화의 단계

정규화는 1~6 정규화(1, 2, 3, bcnf, 4, 5)까지의 여러 과정이 존재하는데, 실제로는 보통 1~3 정규화까지의 과정을 거치게 된다.



### **1. 제1정규형(First Normal Form, 1NF)**

- 어떤 릴레이션 R에 속한 모든 도메인이 **원자값(Atomic Value)**만으로 되어 있음

  > **원자값**이란, 하나의 애트리뷰트가 하나의 값만 가지는 것을 의미함

- 즉, 각 열에는 하나의 값만 저장되어야 하며, 반복되는 그룹이나 다중 값이 없어야 함

- 즉, 각 필드의 값은 하나의 값만 가져야 하며, 모든 열이 원자 값을 가져야 함

- 데이터 간 중복성이 강함 

- 예시

  | 학생ID | 이름   | 수강과목               |
  | ------ | ------ | ---------------------- |
  | 1      | 김철수 | 데이터베이스, 정보보호 |
  | 2      | 홍길동 | 한국사, 토익 스피킹    |

- 위 테이블을 1NF로 변환하면 다음과 같음

  | 학생ID | 이름   | 수강과목     |
  | ------ | ------ | ------------ |
  | 1      | 김철수 | 데이터베이스 |
  | 1      | 김철수 | 정보보호     |
  | 2      | 홍길동 | 한국사       |
  | 2      | 홍길동 | 토익 스피킹  |



### 2. 제2정규형 (Second Normal Form, 2NF)



- 제2정규형은 제1정규형을 만족하면서, 기본 키의 부분집합에 종속적인 모든 비프라이머리(기본키가 아닌) 속성이 없어야 함

- 제1정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 과정인데, 완전 함수 종속이란 기본 키의 부분집합이 결정자가 되어선 안된다는 것

- 예시

  | 학생ID | 과목코드 | 과목명       |
  | ------ | -------- | ------------ |
  | 1      | AC1      | 데이터베이스 |
  | 1      | AC2      | 정보보호     |
  | 2      | CC1      | 한국사       |
  | 2      | CC2      | 토익 스피킹  |

- 이 테이블은 학생ID와 과목코드가 기본키(복합키)라고 가정한다. 이 테이블은 제1정규형은 만족하지만, 부분 함수 종속성이 존재한다.

- 과목명은 과목코드에만 종속되며, 학생 ID에는 종속되지 않아야 한다.

- 위 테이블을 2NF로 변환하면, 학생 테이블과 과목 테이블로 분리하게 됨

  - 학생 테이블:

  | 학생ID | 이름   |
  | ------ | ------ |
  | 1      | 김철수 |
  | 2      | 홍길동 |

  - 과목 테이블:

  | 과목코드 | 과목명       |
  | -------- | ------------ |
  | AC1      | 데이터베이스 |
  | AC2      | 정보보호     |
  | CC1      | 한국사       |
  | CC2      | 토익 스피킹  |

  - 수강 테이블:

  | 학생ID | 과목코드 |
  | ------ | -------- |
  | 1      | AC1      |
  | 1      | AC2      |
  | 2      | CC1      |
  | 2      | CC2      |



### **3. 제3정규화(Third Normal Form, 3NF)**

- 제2정규형을 만족하면서, 기본키가 아닌 열 간의 종속성을 제거하며 테이블을 재구성하는 과정

- 즉, 제2정규화를 진행한 테이블에 대해 이행적 함수 종속을 없애도록 테이블을 분해하는 과정인데, 이행적 함수 종속은 A → B, B → C가 성립할 때 A → C가 성립되는 것

- 예시

  | 학생ID | 과목코드 | 과목명       | 교수명 |
  | ------ | -------- | ------------ | ------ |
  | 1      | AC1      | 데이터베이스 | 이교수 |
  | 1      | AC2      | 정보보호     | 박교수 |
  | 2      | CC1      | 한국사       | 최교수 |
  | 2      | CC2      | 토익 스피킹  | 김교수 |

- 과목과 교수 정보를 분리

  학생 테이블:
  | 학생ID | 이름   |
  | ------ | ------ |
  | 1      | 김철수 |
  | 2      | 홍길동 |

  과목 테이블:
  | 과목코드 | 과목명       |
  | -------- | ------------ |
  | AC1      | 데이터베이스 |
  | AC2      | 정보보호     |
  | CC1      | 한국사       |
  | CC2      | 토익 스피킹  |

  수강 테이블:
  | 학생ID | 과목코드 |
  | ------ | -------- |
  | 1      | AC1      |
  | 1      | AC2      |
  | 2      | CC1      |
  | 2      | CC2      |

  교수 테이블:
  | 과목코드 | 교수명 |
  | -------- | ------ |
  | AC1      | 이교수 |
  | AC2      | 박교수 |
  | CC1      | 최교수 |
  | CC2      | 김교수 |



### 4. **BCNF(Boyce-Codd Normal Form)** 

- BCNF가 3NF보다 더 제한이 엄격함
- 모든 결정자가 후보키가 되도록 함
- 제3정규형에서 후보키가 아닌 결정자가 존재할 때 BCNF가 필요함





### 5. **제4정규형 (Fourth Normal Form, 4NF)**

- 다치 종속성(MVD; Multi-Valued Dependency)을 제거하여 데이터베이스 설계
- 하나의 속성이 다른 여러 속성에 독립적으로 종속될 때 발생하는 문제 해결





### 6. **제5정규형(Fifth Normal Form, 5NF)**

- 릴레이션 R에 존재하는 모든 종속이 릴레이션 R의 후보키를 통해서만 성립될 때 진행
- PJ/NF(Projection-Join Normal Form)이라고도 함





# +) ✔️ 역정규화(Denormalization; 반정규화)

- 정규화를 거듭할수록 검색 질의의 수행 속도는 떨어질 때 검색 질의 수행 속도 향상이 목적
  - 데이터 조회 시 디스크 I/O가 많아서 성능 저하 발생
  - 경로가 너무 멀어 조인으로 인한 성능 저하
  - 과도한 정규화로 인한 데이터 분산화
  - 정상적인 정규화를 통한 고객의 품질 요구사항 충족이 어려운 경우(Full Search)
- 이미 분해된 두 개 이상의 릴레이션들을 합쳐서 하나의 릴레이션으로 만드는 작업
- 정규화가 분해의 작업이라면 역정규화는 정규화를 거꾸로 하여 병합하는 작업











### 참고

https://dev-coco.tistory.com/62
