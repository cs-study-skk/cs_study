# μΈν„°λ½νΈ (Interrupt)

## π“ μΈν„°λ½νΈλ€?
- CPUλ” ν• μκ°„μ— ν•λ‚μ μΌλ°–μ— μ²λ¦¬ν•  μ μ—†λ‹¤.
- κ·Έλ ‡κΈ° λ•λ¬Έμ— **μ–΄λ–¤ μΌμ„ μ²λ¦¬ν•λ” λ„μ¤‘**μ— **μ°μ„  μμ„κ°€ κΈ‰ν• μΌμ„ λ¨Όμ € μ²λ¦¬ν•΄μ•Ό ν•  λ•** λ€μ²ν•  μ μλ” λ§¤μ»¤λ‹μ¦μ„ **μΈν„°λ½νΈ**λΌκ³  ν•λ‹¤.
- μ¦‰, **CPUκ°€ νΉμ • κΈ°λ¥μ„ μν–‰ν•λ” λ„μ¤‘ μ°μ„  μμ„κ°€ κΈ‰ν• μΌμ΄ λ°μƒν–λ‹¤κ±°λ‚ μ–΄λ– ν• μ¤λ¥κ°€ λ°μƒν•΄ κΈ‰ν•κ² λ‹¤λ¥Έ μΌμ„ μ²λ¦¬ν•κ³ μ ν•  λ• μ‚¬μ©ν•λ” κ²ƒ**μ΄λ‹¤.

<br>

> **μΈν„°λ½νΈκ°€ ν•„μ”ν• μ΄μ **
> μΈν„°λ½νΈλ” μ»΄ν“¨ν„° μ‹μ¤ν…μ ν•„μμ  μ”μ†λ΅ **μ‹μ¤ν…μ μ•μ •κ³Ό ν¨μ¨μ„±μ„ μ μ§€ν•λ” λ° μ¤‘μ”ν• μ—­ν• **μ„ ν•λ‹¤.
> <br> **μ™Έλ¶€ μ΄λ²¤νΈ μ²λ¦¬**: μ£Όλ³€ μ¥μΉλ‚ λ‹¤λ¥Έ ν•λ“μ›¨μ–΄ μ¥μΉκ°€ CPUμ—κ² μ‹ νΈλ¥Ό λ³΄λ‚΄μ•Ό ν•λ” κ²½μ°, **μ™Έλ¶€ μ΄λ²¤νΈλ” μ¦‰μ‹ μ²λ¦¬**λμ–΄μ•Ό ν•λ‹¤. μ΄λ° κ²½μ° μΈν„°λ½νΈκ°€ ν•„μ”ν•λ‹¤.
> <br> **λ‹¤μ¤‘ μ‘μ—… μ²λ¦¬**: μ΄μ μ²΄μ λ” λ‹¤μ¤‘ μ‘μ—…μ„ μ§€μ›ν•κΈ° λ•λ¬Έμ— **μ—¬λ¬ ν”„λ΅μ„Έμ¤λ‚ μ¤λ λ“κ°€ λ™μ‹μ— μ‹¤ν–‰**λλ‹¤. μ΄λ¬ν• μ‘μ—…λ“¤μ€ **CPUμ μ‹κ°„μ„ κ³µμ **ν•κΈ° λ•λ¬Έμ— μΈν„°λ½νΈλ¥Ό ν†µν•΄ **μ—¬λ¬ μ‘μ—… κ°„μ μ „ν™μ΄ κ°€λ¥**ν•κ² ν•λ©°, **κ° μ‘μ—…μ΄ μ μ ν• μ‹μ μ—μ„ CPUλ¥Ό μ μ **ν•  μ μλ„λ΅ ν•λ‹¤.
> <br> **μ—λ¬ λ° μμ™Έ μ²λ¦¬**: ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ μ¤‘ μ—λ¬λ‚ μμ™Έ μƒν™©μ΄ λ°μƒν•  μ μλ‹¤. μ΄λ• μΈν„°λ½νΈλ” **CPUμ—κ² ν•΄λ‹Ή λ¬Έμ λ¥Ό μ²λ¦¬ν•λ„λ΅ μ•λ¦΄ μ μλ‹¤.**
> <br> **μ‹μ¤ν… λ¦¬μ†μ¤ κ΄€λ¦¬**: μ •κΈ°μ μΌλ΅ λ°μƒν•λ” νƒ€μ΄λ¨Έ μΈν„°λ½νΈμ™€ κ°™μ΄ μΈν„°λ½νΈλ” **μ‹μ¤ν… λ¦¬μ†μ¤λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬**ν•λ” λ° λ„μ›€μ΄ λλ‹¤. 

<br>

## π“ μΈν„°λ½νΈ μΆ…λ¥
### μ™Έλ¶€ μΈν„°λ½νΈ
- **μ…μ¶λ ¥ μ¥μΉ, νƒ€μ΄λ° μ¥μΉ, μ „μ› λ“± μ™Έλ¶€μ μΈ μ”μΈμ— μν•΄μ„ λ°μƒν•λ” μΈν„°λ½νΈ**
- μ „μ› μ΄μƒ μΈν„°λ½νΈ (Power fail interrupt)
  - μ •μ „μ΄λ‚ μ „μ›μ΄ μ΄μƒ μλ” κ²½μ°
- κΈ°κ³„ μ°©μ¤ μΈν„°λ½νΈ (Machine check interrupt)
  - CPUμ κΈ°λ¥μ μΈ μ¤λ¥
- μ™Έλ¶€ μ‹ νΈ μΈν„°λ½νΈ (External interrupt)
  - νƒ€μ΄λ¨Έμ— μν• μΈν„°λ½νΈ. μμ›μ΄ ν• λ‹Ήλ μ‹κ°„μ΄ λ‹¤ λλ‚ κ²½μ°
  - ν‚¤λ³΄λ“λ΅ μΈν„°λ½νΈ ν‚¤λ¥Ό λ„λ¥Έ κ²½μ° (λ€ν‘μ μΈ μλ΅λ” `Control + Alt + Delete`)
  - μ™Έλ¶€μ¥μΉλ΅λ¶€ν„° μΈν„°λ½νΈ μ”μ²­μ΄ μλ” κ²½μ°
- μ…μ¶λ ¥ μΈν„°λ½νΈ (I/O Interrupt)
  - μ…μ¶λ ¥ μ¥μΉκ°€ λ°μ΄ν„° μ „μ†΅μ„ μ”κµ¬ν•κ±°λ‚ μ „μ†΅μ΄ λλ‚ λ‹¤μ λ™μ‘μ΄ μν–‰λμ–΄μ•Ό ν•  κ²½μ°
  - μ…μ¶λ ¥ λ°μ΄ν„°μ— μ΄μƒμ΄ μλ” κ²½μ°


### λ‚΄λ¶€ μΈν„°λ½νΈ
- **μλ»λ λ…λ Ήμ΄λ‚ λ°μ΄ν„°λ¥Ό μ‚¬μ©ν•  λ• λ°μƒν•λ” μΈν„°λ½νΈ**
- **Trap**μ΄λΌκ³  λ¶€λ¥Έλ‹¤.
- ν”„λ΅κ·Έλ¨ κ²€μ‚¬ μΈν„°λ½νΈ (Program Check Interrupt)
  - Division By Zero: 0μΌλ΅ λ‚λ„λ” κ²½μ°
  - Overflow/Underflow
  - κ·Έ μ™Έ ν”„λ΅κ·Έλ¨ μƒμ μ¤λ¥λ‚ ν”„λ΅κ·Έλ¨μ—μ„ ν•¨μ λ“± λ…λ Ήμ–΄λ¥Ό μλ» μ…λ ¥ν• κ²½μ° λ°μƒν• Exception

### μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ
- **SuperVisor Call**
- μ‚¬μ©μκ°€ ν”„λ΅κ·Έλ¨μ„ μ‹¤ν–‰ν•κ±°λ‚ κ°μ‹ ν”„λ΅κ·Έλ¨μ„ νΈμ¶ν•λ” λ™μ‘μ„ μν–‰ν•λ” κ²½μ°
- μ†ν”„νΈμ›¨μ–΄ μ΄μ© μ¤‘ λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤λ¥Ό μ‹¤ν–‰μ‹ν‚¤λ©΄ μ‹λ¶„ν•  μ²λ¦¬λ¥Ό μ„ν•΄ μμ› ν• λ‹Ή λ“±μ λ™μ‘ μν–‰

<br>

> ν•λ“μ›¨μ–΄ μΈν„°λ½νΈμ™€ μ™Έλ¶€ μΈν„°λ½νΈ, λ‚΄λ¶€ μΈν„°λ½νΈμ™€ μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈλ” λ€μ²΄μ μΌλ΅ λ™μΌν• μλ―Έλ¥Ό κ°€μ§€μ§€λ§ μ•½κ°„μ μ°¨μ΄κ°€ μλ‹¤.
> **μ™Έλ¶€ μΈν„°λ½νΈ**λ” **CPU μ™Έλ¶€μ—μ„ λ°μƒν•λ” μΈν„°λ½νΈ**λ¥Ό μλ―Έν•κ³ , **ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ**λ” **ν•λ“μ›¨μ–΄ λ™μ‘κ³Ό κ΄€λ ¨λ μΈν„°λ½νΈ**λ¥Ό λ§ν•λ‹¤.
> μ¦‰, **μ™Έλ¶€ μΈν„°λ½νΈμ ν•μ„ κ°λ…μ΄ ν•λ“μ›¨μ–΄ μΈν„°λ½νΈ**μ΄λ‹¤.
> **λ‚΄λ¶€ μΈν„°λ½νΈ**λ” **μ£Όλ΅ ν”„λ΅μ„Έμ„ λ‚΄λ¶€μ—μ„μ μμ™Έ μƒν™©μ΄λ‚ νΉμ • λ…λ Ήμ μ‹¤ν–‰μ— λ”°λΌ λ°μƒν•λ” μΈν„°λ½νΈ**μ΄κ³ , **μ†ν”„νΈμ›¨μ–΄ μΈν„°λ½νΈ**λ” **μ†ν”„νΈμ›¨μ–΄μ  λ…λ Ήμ— μν•΄ μΈμ„μ μΌλ΅ λ°μƒμ‹ν‚¤λ” μΈν„°λ½νΈ**λ¥Ό λ§ν•λ‹¤.

<br>

> **β”οΈ νƒ€μ΄λ¨Έ μΈν„°λ½νΈ**
> <br>
> <br>
> ![image](https://github.com/cs-study-skk/cs_study/assets/39427152/2c5ba44b-1018-45c6-b91b-90908ce34333)
> <br>
> <br> νƒ€μ΄λ¨Έ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¤λ” μ¥μΉκ°€ μ»΄ν“¨ν„° μ•μ— μΉ©μΌλ΅ μ΅΄μ¬ν•λ‹¤.
> <br> ν•΄λ‹Ή μΉ©μ€ μΌμ •ν• κ°„κ²©μΌλ΅ μΈν„°λ½νΈλ¥Ό κ³„μ†ν•΄μ„ λ°μƒμ‹ν‚¨λ‹¤.
> <br> κ·Έλ ‡κ² λλ©΄ ν•λ“μ›¨μ–΄μ—μ„λ” μ΄μ μ²΄μ μ—κ² μΈν„°λ½νΈλ¥Ό μΌμ •ν• μ‹κ°„ κ°„κ²©μΌλ΅ λ°μƒμ‹ν‚¤κ³ 
> <br> μ΄μ μ²΄μ λ” ν•΄λ‹Ή μΈν„°λ½νΈλ¥Ό λ„μ ν•΄μ„ κ°€μ§€κ³  μκ² λλ‹¤.
> <br> μ¦‰, ν”„λ΅μ„Έμ¤λ¥Ό κµμ²΄ν•΄μ•Ό ν•λ” μ‹κΈ°λ¥Ό ν•λ“μ›¨μ–΄κ°€ μ΄μ μ²΄μ μ—κ² μ•λ ¤ μ£Όμ–΄ μΌμ •ν• μ‹κ°„ κ°„κ²©μΌλ΅ ν”„λ΅μ„Έμ¤λ¥Ό κµμ²΄ν•΄μ•Ό ν•λ‹¤λ” κ±Έ μΈμ§€ν•κ² ν•΄ μ¤€λ‹¤.
> <br> μ΄λ” **μ„ μ ν• μ¤μΌ€μ¤„λ¬**μ—κ² ν•„μ”ν• κΈ°λ¥μ΄λ©°, **μ™Έλ¶€ μΈν„°λ½νΈ μ²λ¦¬ λ°©λ²•**μ΄λ‹¤.


<br>

## π“ μΈν„°λ½νΈ μ°μ„  μμ„
ν•΄λ‹Ή μ°μ„  μμ„λ” μΌλ°μ μΈ μ°μ„  μμ„λ¥Ό λ§ν•λ©° μ‹¤μ  μ‹μ¤ν…μ—μ„λ” μ°¨μ΄κ°€ μμ„ μ μλ‹¤.
1. μ „μ› μ΄μƒ (Power Fail): μ‹μ¤ν… μ „μ›μ— μ΄μƒμ΄ μƒκ²Όμ„ λ• λ°μƒν•λ” μΈν„°λ½νΈλ΅, κ°€μ¥ μ‹¬κ°ν• μƒν™©μΌλ΅ κ°„μ£Όλμ–΄ λ³΄ν†µ κ°€μ¥ λ†’μ€ μ°μ„  μμ„λ¥Ό κ°–λ”λ‹¤.
2. κΈ°κ³„ μ°©μ¤ (Machine Check): ν•λ“μ›¨μ–΄μ—μ„ λ°μƒν•λ” λΉ„μ •μƒμ μΈ μƒν™©μΌλ΅, CPUλ‚ λ©”λ¨λ¦¬ λ“±μ ν•λ“μ›¨μ–΄ μ¤λ¥μ΄λ‹¤.
3. μ™Έλ¶€ μ‹ νΈ (External): μ£Όλ΅ μ‚¬μ©μ μ…λ ¥μ΄λ‚ μ™Έλ¶€ μ¥μΉμ—μ„ λ°μƒν•λ” μΈν„°λ½νΈμ΄λ‹¤.
4. μ…μ¶λ ¥ (I/O): μ…μ¶λ ¥ μ¥μΉμ™€μ ν†µμ‹ μ—μ„ λ°μƒν•λ” μΈν„°λ½νΈλ΅, μ™„λ£λ μ…μ¶λ ¥ μ‘μ—…μ„ μ²λ¦¬ν•κΈ° μ„ν•΄ λ°μƒν•λ‹¤.
5. λ…λ Ήμ–΄ μλ»: μλ»λ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•λ ¤κ³  ν•  λ• λ°μƒν•λ” μΈν„°λ½νΈμ΄λ‹¤.
6. ν”„λ΅κ·Έλ¨ κ²€μ‚¬ (Program Check): ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¤‘μ— λ°μƒν•λ” μμ™Έμ μΈ μƒν™©μ΄λ‚ μ¤λ¥λ¥Ό λ‚νƒ€λ‚΄λ” μΈν„°λ½νΈμ΄λ‹¤.
7. SVC (SuperVisor Call): μ‚¬μ©μ ν”„λ΅κ·Έλ¨μ΄ μ΄μ μ²΄μ μ μ„λΉ„μ¤λ¥Ό μ”μ²­ν•  λ• λ°μƒν•λ” μΈν„°λ½νΈμ΄λ‹¤. μ΄λ” μΌλ°μ μΌλ΅ μ΄μ μ²΄μ κ°€ μ κ³µν•λ” μ‹μ¤ν… μ½μ„ νΈμ¶ν•  λ• λ°μƒν•λ‹¤.

<br>

## π“ μΈν„°λ½νΈ λ™μ‘ λ° μ²λ¦¬ λ‹¨κ³„
![image](https://github.com/cs-study-skk/cs_study/assets/39427152/4412e322-b7f2-4d58-b01c-09dab9a577a1)
1. μΈν„°λ½νΈ μ”μ²­
2. CPUκ°€ μ²λ¦¬ν•λ ν”„λ΅μ„Έμ¤ μ¤‘λ‹¨
3. ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ ν”„λ΅μ„Έμ¤ μƒνƒ PCB(Process Control Block)μ— μ €μ¥
4. μΈν„°λ½νΈ μ›μΈ μ‹λ³„
5. ISR(Interrupt Service Routine) μ²λ¦¬ -> λ°μƒν• μΈν„°λ½νΈμ λ²νΈ (IDT)λ¥Ό ν™•μΈν•΄ μ£Όμ† κ°’μ„ λ„£μ
6. μƒνƒ λ³µκµ¬
7. PCBμ—μ„ μ •λ³΄ κ°€μ§€κ³  μ¤κΈ°
8. λ…λ Ήμ–΄ μν–‰ -> μ΄μ „ μ¤‘λ‹¨λ ν”„λ΅μ„Έμ¤ λ…λ Ήμ–΄ μ‹¤ν–‰μ„ μ¬κ°

<br>

> **β”οΈ IDT (Interrupt Descriptor Table)**
> <br> λ―Έλ¦¬ μ •μλμ–΄ μλ” μΈν„°λ½νΈλ“¤μ λ²νΈμ™€ μ‹¤ν–‰ μ½”λ“λ¥Ό κ°€λ¦¬ν‚¤λ” μ£Όμ†λ“¤μ΄ μ €μ¥λμ–΄ μλ” ν…μ΄λΈ”μ΄λ‹¤.
> <br> μ»΄ν“¨ν„° λ¶€ν… μ‹ μ΄μ μ²΄μ κ°€ IDTμ— μΈν„°λ½νΈλ“¤μ„ κΈ°λ΅ν•κ³ , 
> <br> μΈν„°λ½νΈκ°€ λ°μƒν•λ©΄ IDTλ¥Ό ν™•μΈν•΄ Interrupt λ²νΈμ— ν•΄λ‹Ήν•λ” ν•¨μλ¥Ό νΈμ¶ν•μ—¬ μΈν„°λ½νΈλ¥Ό μ²λ¦¬ν•κ² λλ‹¤.

<br>

> **β”οΈ ν”„λ΅μ„Έμ¤ μ μ–΄ λΈ”λ΅(Process Control Block, PCB)**
> <br>
>![image](https://github.com/cs-study-skk/cs_study/assets/39427152/1a643472-e832-4b99-9b5c-e509c036694c)
> <br>
> <br> μ΄μ μ²΄μ κ°€ κ° ν”„λ΅μ„Έμ¤λ¥Ό κ΄€λ¦¬ν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ” λ°μ΄ν„° κµ¬μ΅°.
> <br> ν”„λ΅μ„Έμ¤ μƒνƒ, ν”„λ΅μ„Έμ¤ μΉ΄μ΄ν„°(λ‹¤μ μ‹¤ν–‰ν•  λ…λ Ήμ–΄μ μ£Όμ†), λ μ§€μ¤ν„° μƒνƒ, ν”„λ΅κ·Έλ¨ μ‹λ³„μ, μ¤μΌ€μ¤„λ§ μ •λ³΄, λ©”λ¨λ¦¬ κ΄€λ¦¬ μ •λ³΄, μ…μ¶λ ¥ μƒνƒ μ •λ³΄, ν”„λ΅μ„Έμ¤ κ³„μ • μ •λ³΄
> <br> μ„μ μ •λ³΄λ“¤μ„ μ €μ¥ν•λ” λ° μ‚¬μ©λλ‹¤.
> <br> ν”„λ΅μ„Έμ¤λ§λ‹¤ ν•λ‚μ PCBκ°€ ν• λ‹Ήλκ³ , ν”„λ΅μ„Έμ¤κ°€ μƒμ„±λλ©΄ PCBκ°€ μ΄κΈ°ν™”λκ³  μΆ…λ£λλ©΄ PCBκ°€ μ κ±°λλ‹¤.

<br>

## π“ μΈν„°λ½νΈ κµ¬μ„± μ”μ† 
1. λ°μƒμ›(Source) : μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¨ μ†μ¤ λλ” ν•λ“μ›¨μ–΄ μ¥μΉκ°€ λ¬΄μ—‡μΈμ§€. μ¦‰, λ„κ°€ μΈν„°λ½νΈλ¥Ό λ°μƒμ‹μΌ°λ”μ§€.
2. μ°μ„ μμ„(Priority) : μ—¬λ¬ μΈν„°λ½νΈ μ”μ²­μ΄ λ™μ‹μ— λ°μƒν•  λ•, μ–΄λ–¤ μΈν„°λ½νΈλ¥Ό μ°μ„ ν•μ—¬ μ²λ¦¬ν• μ§€. λ†’μ€ μ°μ„  μμ„λ¥Ό κ°€μ§„ μΈν„°λ½νΈλ” λ¨Όμ € μ²λ¦¬λκ³ , μΌλ°μ μΌλ΅ μ¤‘μ”ν• μΈν„°λ½νΈμ— λ†’μ€ μ°μ„  μμ„κ°€ ν• λ‹Ήλλ‹¤.
3. μΈν„°λ½νΈ λ²΅ν„°(Interrupt Vector) : κ° μΈν„°λ½νΈμ— λ€ν• μ„λΉ„μ¤ λ£¨ν‹΄(Interrupt Service Routine, ISR)μ μ‹μ‘ λ²μ§€. CPUλ” μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ• ν•΄λ‹Ή μΈν„°λ½νΈ λ²΅ν„°λ¥Ό ν†µν•΄ ISR μ„μΉλ¥Ό μ°Ύκ³  μ‹¤ν–‰ν•λ‹¤.


μ°Έκ³  λΈ”λ΅κ·Έ: 
[μ°Έκ³ ](https://velog.io/@hyun0310woo/7.-%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8%EC%97%90-%EB%8C%80%ED%95%B4%EC%84%9C)
[μ°Έκ³ ](https://nice-engineer.tistory.com/entry/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8Interrupt)
[μ°Έκ³ ](https://whatisthenext.tistory.com/147)
[μ°Έκ³ ](https://baebalja.tistory.com/354)
[μ°Έκ³ ](https://velog.io/@yuseogi0218/Interrupt-%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8)
[μ°Έκ³ ](https://medium.com/@lazypanda43/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8-%EC%A2%85%EB%A5%98%EC%99%80-%EC%B2%98%EB%A6%AC%EA%B3%BC%EC%A0%95%EA%B3%BC-%EC%9A%B0%EC%84%A0%EC%88%9C%EC%9C%84-c95c26909472)
[μ°Έκ³ ](https://binworld.kr/10)

